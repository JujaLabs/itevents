branches:
  only:
  - master
language: java
jdk:
- oraclejdk8
addons:
  postgresql: '9.2'
services:
- postgresql
before_install:
- cp .travis/properties/travis.properties restservice/src/main/resources/local.properties
- cp .travis/properties/test-travis.properties restservice/src/test/resources/test-local.properties
before_script:
- psql -c 'create database itevents;' -U postgres
- psql -c 'create database test;' -U postgres
script:
- gradle
after_success:
- git remote rename origin initial
- git remote rename openshift origin
deploy:
  provider: openshift
  user: $OPENSHIFT_USER
  password: $OPENSHIFT_PASSWORD
  domain: $OPENSHIFT_DOMAIN
  app: $OPENSHIFT_APP
notifications:
  slack:
    secure: mR2QhKHdCsbLrJ7vSkbKJbxGh1EoL1snl80LlckmGgdWpJ7d6jxWS0NmRtObOHwJJuJPUVWc3wZ2UTj65RukMjFFXJPRD8dfEGd6lVmiY26Qoni9UGYYBp/Tj1DieuA8WDCbWO65sYAWRvq0ry15kNDYxBF+FfQD60ZDqnYkALpI3VqOWUIfG2gNMAx0JSRflwXsUsW9m8Nm7PObjVa3KhYROCq0pr/kaAPcR3D0fg/sSz9jWwaHtENMdMW+Qz2MMG4JCnERB5KAxuNDv2YMr9lo3DggxeeTF77BVLkuvFUZkervRgpc/EaRWTRluwI7azeIr9QOW/YotTXC6jj1gvqMJE4026BwCpmH1rhE0o/LUUV+SbZfMnjRRg/rzgnOd5mMWnypOruQmwk9OzcXkHMT6FaANwUUzh36dBMpjZfiPP5KYYJjEys3bW/FE7B+KGi90HQZvmL+U9RJhjHD7fOrN9sSPZYukExOydeW1g2ckF4u+Ran+pAoiKl84Yy8hd4Y/7SFUqgBdbs77+OzSCGcIjcHpIFPT4QTeXX89FLUTxVtQl1nQSwof+hHsoeNSLvpQu/T8tT1GXGyc6P+pajZuq0KtKgEsHLx7OxGP4jAvTjlmdy8d4HfegR5Iv0RCjb1yxeDEz6t57HHCO2YwOvjfPX4AX8rSJowTnFAzC8=
before_cache:
  - rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/